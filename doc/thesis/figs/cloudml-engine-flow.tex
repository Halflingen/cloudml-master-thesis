\begin{figure}

  \begin{center}
    \begin{tikzpicture}
      \node [circle, draw, fill=gray!20, top color=white, bottom color=black!10, minimum width=1cm] 
        (head) at (0,0) {};
      \path (head) ++(0, -2) coordinate (groin);
      \path (head) ++(0, -1) coordinate (armcon);
      \path (groin) ++(.5, -1.25) coordinate (rfoot);
      \path (groin) ++(-.5, -1.25) coordinate (lfoot);
      \path (armcon) ++(1, -.1) coordinate (rhand);
      \path (armcon) ++(-1, -.1) coordinate (lhand);
      \path[draw, thick] (head) -- (groin);
      \path[draw, thick] (groin) -- (rfoot);
      \path[draw, thick] (groin) -- (lfoot);
      \path[draw, thick] (armcon) -- (rhand);
      \path[draw, thick] (armcon) -- (lhand);

      \node[below of=head, text width=2cm] (Body) {};

      \node[box, right=of head, minimum width=3.8cm, minimum height=3.5cm, xshift=1cm, yshift=-1.5cm] (System) {};
      \node[box, right=of head, xshift=2cm, yshift=-0.7cm] (Engine) {Engine};
      \node[box, below=of Engine, yshift=0.5cm] (Cloud-Connector) {Cloud-Connector};
      \node[box, below=of Cloud-Connector, yshift=0.5cm] (RuntimeInstance) {RuntimeInstance};

      \node (Rackspace) [tcloud, right=of System, xshift=0.5cm, yshift=1.5cm] {Rackspace};
      \node (EC2) [tcloud, below=of Rackspace] {EC2};

      \draw[arrow] (Body.east) -- (Engine.west);
      \draw[arrow] (Engine.south) -| (Cloud-Connector.north);

      \draw[arrow] (Cloud-Connector.east) -- (Rackspace.west);
      \draw[arrow] (Cloud-Connector.east) -- (EC2.west);

      \draw[arrow] (Cloud-Connector.south) -| (RuntimeInstance.north);
      \draw[arrow] (RuntimeInstance.west) -- (Body.east);

      \node (Label01) [below=of Body, yshift=-1.5cm] {User};
      \node (Label02) [right=of Label01, xshift=1.2cm] {Cloudml-engine};
      \node [right=of Label02, xshift=1.2cm] {Cloud providers};

    \end{tikzpicture}
  \end{center}
  \caption{Usage flow in cloudml-engine}
  \label{fig:cloudml-engine-flow}
\end{figure}
