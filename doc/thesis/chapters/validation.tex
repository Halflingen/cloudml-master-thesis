\mychapter{validation}{Validation \& Experiments}

To validate how CloudML addresses the requirements from~\citechap{requirements},
a topology of three nodes~(\citefig{threenodes}) is provisioned.
This topology is the same as Alice used for her second scenario in \citesec{meta-model}.
The setup is sufficient to do a full deployment of the \emph{BankManager} application.

The validation will provision on two different providers, \myac{AWS} and Rackspace.

\paragraph{Template.}
\input{codes/validation-threenodes}

The implementation uses \myac{JSON} to define templates as a human readable serialization mechanism.
The lexical representation of \citefig{threenodes} can be seen in \citelist{validation-threenodes}. 
There are a total of three files:
\begin{description}
  \item[account.json.]
    Used to authenticate against a provider.
    In \citelist{validation-threenodes} \texttt{aws-ec2} is set as \texttt{provider},
    \ie nodes are created on \myac{AWS}.
    The two other properties, \texttt{identity} and \texttt{credential} are used for authentication.
    For \myac{AWS} that means \emph{Access Key ID} and \emph{Secret Access Key},
    while for Rackspace this is \emph{username} and \emph{API Key}.
  \item[front-ends.json.]
    Defines front-end nodes of the topology.
    Each node have specific attributes regarding their tasks, similar to Alice's scenario,
    but as an addiontal precaution the \texttt{front-end} nodes have increased \myac{RAM}.
  \item[back-end.json.]
    Defines the back-end node of the topology.
    Even though this is a separate file it is a part of the same topology,
    and it is provisioned beside the front-end nodes.
\end{description}
%All nodes in the first template are bound to the load balancer~(\texttt{loadBalancer})
%defined within the template.
The topology is split into two templates to support a load balancer,
as every node within a template will be bound to a given load balancer.
This feature is implemented in \emph{cloudml-engine}, but at writing moment~(\date{April 2012}),
is not supported by jclouds.
%since the \texttt{back-end} node should not be bound to the load balancer.
The splitting is by design, as a \texttt{template} is not directly bound to a topology,
and is also why \texttt{build} accept a list of templates.
The whole text represents the \texttt{Template} and consequently 
``\texttt{nodes}'' is a list of \texttt{Node} from the model.
The JSON is textual which makes it \emph{shareable} as files.
Once such a file is created it can be reused (\emph{reproducibility}) 
on any supported provider (\emph{multicloud}).
These benefits match the requirement \citereq{lexical-template}.

\paragraph{Client.}
\input{codes/validation-client.tex}

To validate the templates 

\paragraph{Building.}
\input{codes/validation-output.tex}

\paragraph{After provisioning.}
\input{figs/validation-aws.tex}
\input{figs/validation-rackspace.tex}

\section{Comparisons}
\input{tables/requirements-comparison}

Comparing challenges with some selected providers and technologies from \citechap{state-of-the-art}.
