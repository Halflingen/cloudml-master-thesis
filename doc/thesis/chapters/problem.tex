\mychapter{problem}{Challenges in the cloud}
\input{figs/nodes}
\input{tables/analysis}

\section{Outlined problem}

To recognize challenges when doing cloud provisioning an example application~\cite{BankManager} was utilized.
The application (from here known as \emph{BankManager}) is a prototypical bank manager system
which support creating users and bank accounts and moving money between bank accounts and users.
\emph{BankManager} is designed but not limited to support distribution between several nodes.
Some examples of provisioning topology is illustrated in \citefig{BankManager}, each
example includes a browser to visualize application flow, front-end visualizes executable
logic and back-end represents database.
It is possible to have both front-end and back-end on the same node, as shown in \citefig{singlenode}.
In \citefig{twonodes} front-end is separated from back-end, 
this introduces the flexibility of increasing computation power on the front-end node while spawning more
storage on the back-end. 
For applications performing heavy computations it can be beneficial to distribute the workload between several
front-end nodes as seen in \citefig{threenodes}, the number of front-ends can be linearly increased 
$n$ number of times as shown in \citefig{frontends}.
\emph{BankManager} is not designed to handle several back-ends because of relational model based database,
this can solved on a database level with master and slaves (\citefig{frontendbackends}).
We used bash-scripts to prototype full deployments of \emph{BankManager} against \emph{Amazon Web Services}~(AWS)~\cite{aws}
and Rackspace~\cite{rackspace} with a topology of three nodes as shown in \citefig{threenodes}.
From this prototype it became clear that there were multiple challenges to address:

\begin{itemize}
  \item \textbf{Complexity}: The first challenge encountered was to simply
    authenticate and communicate with the cloud. The two providers 
    had different approaches, AWS~\cite{aws} had command-line tools built from their Java APIs,
    while Rackspace~\cite{rackspace} had no tools beside the API language bindings,
    thus the need of operating both command-line tools as well as public APIs.
    As this emphasizes the complexity even further it also stresses engineering capabilities
    of individuals executing the tasks to a higher technical level.

  \item \textbf{Multicloud}: 
    Once able to provision the correct amount of nodes with desired properties
    on the first provider it became clear that mirroring the setup to the other provider 
    was not as convenient as anticipated.
    There were certain aspects of vendor lock-in, so each script was hand-crafted for specific providers.
    The lock-in situations can in many cases have financial implications where for example
    a finished application is locked to one provider and this provider increases tenant costs.
    Or availability decreases and results in decrease of service uptime damaging revenue.

  \item \textbf{Reproducibility}: The scripts provisioned nodes based on command-line arguments
    and did not persist the designed topology in any way, this made topologies cumbersome to reproduce.

  \item \textbf{Shareable}: Since the scripts did not remember a given setup it was impossible 
    to share topologies ``as is'' between coworkers.
    It is important that topologies can be shared because direct input from individuals
    with different areas of competence can increase quality.

  \item \textbf{Robustness}: There were several ways the scripts could fail and most errors were ignored.
    Transactional behaviors were non-existent.

  \item \textbf{Run-time dependency}: The scripts were developed to fulfill a complete deployment,
    and to do this it proved important to temporally save run-time specific metadata.
    This was crucial data needed to connect front-end nodes with the back-end node.
\end{itemize}


\section{Why is it important to solve the problems}
\todo{
  \begin{itemize}
    \item Cloud domain is state of the art
    \item model driven approach with benefits (no special tooling)
    \item Easier for businesses (especially SMBs) to reach out to Cloud
    \item Easier for larger more time-constraint businesses to try out the cloud
    \item Opening the eyes of big providers for a larger cross-cloud language
  \end{itemize}
}
